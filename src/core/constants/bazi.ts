/**
 * BaZi Constants
 * Core constants for BaZi calculations
 */

// Heavenly Stems (天干)
export const HEAVENLY_STEMS = [
  { name: '甲', element: '木', yinYang: 'yang' },
  { name: '乙', element: '木', yinYang: 'yin' },
  { name: '丙', element: '火', yinYang: 'yang' },
  { name: '丁', element: '火', yinYang: 'yin' },
  { name: '戊', element: '土', yinYang: 'yang' },
  { name: '己', element: '土', yinYang: 'yin' },
  { name: '庚', element: '金', yinYang: 'yang' },
  { name: '辛', element: '金', yinYang: 'yin' },
  { name: '壬', element: '水', yinYang: 'yang' },
  { name: '癸', element: '水', yinYang: 'yin' }
];

export const HEAVENLY_STEMS_ARRAY = ['甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'];

// Earthly Branches (地支)
export const EARTHLY_BRANCHES = [
  { name: '子', element: '水', zodiac: '鼠' },
  { name: '丑', element: '土', zodiac: '牛' },
  { name: '寅', element: '木', zodiac: '虎' },
  { name: '卯', element: '木', zodiac: '兔' },
  { name: '辰', element: '土', zodiac: '龙' },
  { name: '巳', element: '火', zodiac: '蛇' },
  { name: '午', element: '火', zodiac: '马' },
  { name: '未', element: '土', zodiac: '羊' },
  { name: '申', element: '金', zodiac: '猴' },
  { name: '酉', element: '金', zodiac: '鸡' },
  { name: '戌', element: '土', zodiac: '狗' },
  { name: '亥', element: '水', zodiac: '猪' }
];

export const EARTHLY_BRANCHES_ARRAY = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];

// Five Elements (五行)
export const FIVE_ELEMENTS = [
  { name: '木', color: 'green' },
  { name: '火', color: 'red' },
  { name: '土', color: 'yellow' },
  { name: '金', color: 'white' },
  { name: '水', color: 'black' }
];

export const FIVE_ELEMENTS_ARRAY = ['木', '火', '土', '金', '水'];

// Type for Five Elements
export type FiveElement = '木' | '火' | '土' | '金' | '水';

// Stem Elements mapping
export const STEM_ELEMENTS: Record<string, string> = {
  '甲': '木', '乙': '木',
  '丙': '火', '丁': '火',
  '戊': '土', '己': '土',
  '庚': '金', '辛': '金',
  '壬': '水', '癸': '水'
};

// Branch Elements mapping
export const BRANCH_ELEMENTS: Record<string, string> = {
  '子': '水', '丑': '土', '寅': '木', '卯': '木',
  '辰': '土', '巳': '火', '午': '火', '未': '土',
  '申': '金', '酉': '金', '戌': '土', '亥': '水'
};

// Hidden Stems (藏干)
export const HIDDEN_STEMS: Record<string, Array<{stem: string, power: number}>> = {
  '子': [{ stem: '癸', power: 1.0 }],
  '丑': [{ stem: '己', power: 0.6 }, { stem: '辛', power: 0.3 }, { stem: '癸', power: 0.1 }],
  '寅': [{ stem: '甲', power: 0.6 }, { stem: '丙', power: 0.3 }, { stem: '戊', power: 0.1 }],
  '卯': [{ stem: '乙', power: 1.0 }],
  '辰': [{ stem: '戊', power: 0.6 }, { stem: '乙', power: 0.3 }, { stem: '癸', power: 0.1 }],
  '巳': [{ stem: '丙', power: 0.6 }, { stem: '戊', power: 0.3 }, { stem: '庚', power: 0.1 }],
  '午': [{ stem: '丁', power: 0.7 }, { stem: '己', power: 0.3 }],
  '未': [{ stem: '己', power: 0.6 }, { stem: '丁', power: 0.3 }, { stem: '乙', power: 0.1 }],
  '申': [{ stem: '庚', power: 0.6 }, { stem: '壬', power: 0.3 }, { stem: '戊', power: 0.1 }],
  '酉': [{ stem: '辛', power: 1.0 }],
  '戌': [{ stem: '戊', power: 0.6 }, { stem: '辛', power: 0.3 }, { stem: '丁', power: 0.1 }],
  '亥': [{ stem: '壬', power: 0.7 }, { stem: '甲', power: 0.3 }]
};

// Alias for compatibility
export const BRANCH_HIDDEN_STEMS = HIDDEN_STEMS;

// Ten Gods (十神)
export const TEN_GODS: Record<string, Record<string, string>> = {
  '甲': { '甲': '比肩', '乙': '劫財', '丙': '食神', '丁': '傷官', '戊': '偏財', '己': '正財', '庚': '七殺', '辛': '正官', '壬': '偏印', '癸': '正印' },
  '乙': { '甲': '劫財', '乙': '比肩', '丙': '傷官', '丁': '食神', '戊': '正財', '己': '偏財', '庚': '正官', '辛': '七殺', '壬': '正印', '癸': '偏印' },
  '丙': { '甲': '偏印', '乙': '正印', '丙': '比肩', '丁': '劫財', '戊': '食神', '己': '傷官', '庚': '偏財', '辛': '正財', '壬': '七殺', '癸': '正官' },
  '丁': { '甲': '正印', '乙': '偏印', '丙': '劫財', '丁': '比肩', '戊': '傷官', '己': '食神', '庚': '正財', '辛': '偏財', '壬': '正官', '癸': '七殺' },
  '戊': { '甲': '七殺', '乙': '正官', '丙': '偏印', '丁': '正印', '戊': '比肩', '己': '劫財', '庚': '食神', '辛': '傷官', '壬': '偏財', '癸': '正財' },
  '己': { '甲': '正官', '乙': '七殺', '丙': '正印', '丁': '偏印', '戊': '劫財', '己': '比肩', '庚': '傷官', '辛': '食神', '壬': '正財', '癸': '偏財' },
  '庚': { '甲': '偏財', '乙': '正財', '丙': '七殺', '丁': '正官', '戊': '偏印', '己': '正印', '庚': '比肩', '辛': '劫財', '壬': '食神', '癸': '傷官' },
  '辛': { '甲': '正財', '乙': '偏財', '丙': '正官', '丁': '七殺', '戊': '正印', '己': '偏印', '庚': '劫財', '辛': '比肩', '壬': '傷官', '癸': '食神' },
  '壬': { '甲': '食神', '乙': '傷官', '丙': '偏財', '丁': '正財', '戊': '七殺', '己': '正官', '庚': '偏印', '辛': '正印', '壬': '比肩', '癸': '劫財' },
  '癸': { '甲': '傷官', '乙': '食神', '丙': '正財', '丁': '偏財', '戊': '正官', '己': '七殺', '庚': '正印', '辛': '偏印', '壬': '劫財', '癸': '比肩' }
};

// NaYin (纳音)
export const NA_YIN: Record<string, string> = {
  '甲子': '海中金', '乙丑': '海中金',
  '丙寅': '炉中火', '丁卯': '炉中火',
  '戊辰': '大林木', '己巳': '大林木',
  '庚午': '路旁土', '辛未': '路旁土',
  '壬申': '剑锋金', '癸酉': '剑锋金',
  '甲戌': '山头火', '乙亥': '山头火',
  '丙子': '涧下水', '丁丑': '涧下水',
  '戊寅': '城头土', '己卯': '城头土',
  '庚辰': '白蜡金', '辛巳': '白蜡金',
  '壬午': '杨柳木', '癸未': '杨柳木',
  '甲申': '泉中水', '乙酉': '泉中水',
  '丙戌': '屋上土', '丁亥': '屋上土',
  '戊子': '霹雳火', '己丑': '霹雳火',
  '庚寅': '松柏木', '辛卯': '松柏木',
  '壬辰': '长流水', '癸巳': '长流水',
  '甲午': '砂中金', '乙未': '砂中金',
  '丙申': '山下火', '丁酉': '山下火',
  '戊戌': '平地木', '己亥': '平地木',
  '庚子': '壁上土', '辛丑': '壁上土',
  '壬寅': '金箔金', '癸卯': '金箔金',
  '甲辰': '覆灯火', '乙巳': '覆灯火',
  '丙午': '天河水', '丁未': '天河水',
  '戊申': '大驿土', '己酉': '大驿土',
  '庚戌': '钗钏金', '辛亥': '钗钏金',
  '壬子': '桑柘木', '癸丑': '桑柘木',
  '甲寅': '大溪水', '乙卯': '大溪水',
  '丙辰': '沙中土', '丁巳': '沙中土',
  '戊午': '天上火', '己未': '天上火',
  '庚申': '石榴木', '辛酉': '石榴木',
  '壬戌': '大海水', '癸亥': '大海水'
};

// Branch Relations (地支关系)
export const BRANCH_RELATIONS = {
  // 地支相合
  harmony: {
    '子': ['丑'],
    '寅': ['亥'],
    '卯': ['戌'],
    '辰': ['酉'],
    '巳': ['申'],
    '午': ['未']
  },
  // 地支相冲
  clash: {
    '子': ['午'],
    '丑': ['未'],
    '寅': ['申'],
    '卯': ['酉'],
    '辰': ['戌'],
    '巳': ['亥']
  },
  // 地支相刑
  punishment: {
    '子': ['卯'],
    '丑': ['戌', '未'],
    '寅': ['巳', '申'],
    '卯': ['子'],
    '辰': ['辰'],
    '巳': ['申', '寅'],
    '午': ['午'],
    '未': ['丑', '戌'],
    '申': ['寅', '巳'],
    '酉': ['酉'],
    '戌': ['未', '丑'],
    '亥': ['亥']
  },
  // 地支相害
  harm: {
    '子': ['未'],
    '丑': ['午'],
    '寅': ['巳'],
    '卯': ['辰'],
    '巳': ['寅'],
    '午': ['丑'],
    '未': ['子'],
    '申': ['亥'],
    '酉': ['戌'],
    '戌': ['酉'],
    '亥': ['申']
  },
  // 三合局
  threeHarmony: [
    ['申', '子', '辰'], // 水局
    ['亥', '卯', '未'], // 木局
    ['寅', '午', '戌'], // 火局
    ['巳', '酉', '丑']  // 金局
  ]
};

// Yin Yang mapping
export const YIN_YANG: Record<string, 'yin' | 'yang'> = {
  '甲': 'yang', '乙': 'yin',
  '丙': 'yang', '丁': 'yin',
  '戊': 'yang', '己': 'yin',
  '庚': 'yang', '辛': 'yin',
  '壬': 'yang', '癸': 'yin',
  '子': 'yang', '丑': 'yin',
  '寅': 'yang', '卯': 'yin',
  '辰': 'yang', '巳': 'yin',
  '午': 'yang', '未': 'yin',
  '申': 'yang', '酉': 'yin',
  '戌': 'yang', '亥': 'yin'
};

// Stem Yin Yang
export const STEM_YIN_YANG = YIN_YANG;

// Shen Sha definitions (simplified for now)
export const SHEN_SHA_DEFINITIONS = {
  tianyi: {
    name: '天乙贵人',
    type: 'auspicious',
    rules: {
      '甲': ['丑', '未'],
      '乙': ['子', '申'],
      '丙': ['亥', '酉'],
      '丁': ['亥', '酉'],
      '戊': ['丑', '未'],
      '己': ['子', '申'],
      '庚': ['丑', '未'],
      '辛': ['寅', '午'],
      '壬': ['卯', '巳'],
      '癸': ['卯', '巳']
    }
  },
  // Add more ShenSha definitions as needed
};

// Solar Terms (节气)
export const SOLAR_TERMS = [
  '立春', '雨水', '惊蛰', '春分', '清明', '谷雨',
  '立夏', '小满', '芒种', '夏至', '小暑', '大暑',
  '立秋', '处暑', '白露', '秋分', '寒露', '霜降',
  '立冬', '小雪', '大雪', '冬至', '小寒', '大寒'
];

// Solar Term to Earthly Branch mapping
export const SOLAR_TERM_TO_ZHI: Record<string, string> = {
  '立春': '寅', '雨水': '寅',
  '惊蛰': '卯', '春分': '卯',
  '清明': '辰', '谷雨': '辰',
  '立夏': '巳', '小满': '巳',
  '芒种': '午', '夏至': '午',
  '小暑': '未', '大暑': '未',
  '立秋': '申', '处暑': '申',
  '白露': '酉', '秋分': '酉',
  '寒露': '戌', '霜降': '戌',
  '立冬': '亥', '小雪': '亥',
  '大雪': '子', '冬至': '子',
  '小寒': '丑', '大寒': '丑'
};

// Twelve Growth Stages (十二长生)
export const TWELVE_GROWTH_STAGES = [
  '长生', '沐浴', '冠带', '临官', '帝旺', '衰', '病', '死', '墓', '绝', '胎', '养'
];

// Growth stage mapping by element
export const GROWTH_STAGE_MAPPING: Record<string, Record<string, string>> = {
  '木': {
    '亥': '长生', '子': '沐浴', '丑': '冠带', '寅': '临官', '卯': '帝旺',
    '辰': '衰', '巳': '病', '午': '死', '未': '墓', '申': '绝', '酉': '胎', '戌': '养'
  },
  '火': {
    '寅': '长生', '卯': '沐浴', '辰': '冠带', '巳': '临官', '午': '帝旺',
    '未': '衰', '申': '病', '酉': '死', '戌': '墓', '亥': '绝', '子': '胎', '丑': '养'
  },
  '土': {
    '寅': '长生', '卯': '沐浴', '辰': '冠带', '巳': '临官', '午': '帝旺',
    '未': '衰', '申': '病', '酉': '死', '戌': '墓', '亥': '绝', '子': '胎', '丑': '养'
  },
  '金': {
    '巳': '长生', '午': '沐浴', '未': '冠带', '申': '临官', '酉': '帝旺',
    '戌': '衰', '亥': '病', '子': '死', '丑': '墓', '寅': '绝', '卯': '胎', '辰': '养'
  },
  '水': {
    '申': '长生', '酉': '沐浴', '戌': '冠带', '亥': '临官', '子': '帝旺',
    '丑': '衰', '寅': '病', '卯': '死', '辰': '墓', '巳': '绝', '午': '胎', '未': '养'
  }
};

// Ten Gods Array (for easy iteration)
export const TEN_GODS_ARRAY = [
  '正官', '七杀', '正印', '偏印', '正财', '偏财', '食神', '伤官', '比肩', '劫财'
];

// Ten Gods Short Form Mapping (單字縮寫)
export const TEN_GODS_SHORT: Record<string, string> = {
  '正官': '官',
  '七殺': '殺',
  '正印': '印',
  '偏印': '梟',
  '正財': '財',
  '偏財': '才',
  '食神': '食',
  '傷官': '傷',
  '比肩': '比',
  '劫財': '劫',
  // For compatibility with different naming conventions
  '偏官': '殺'
};

// Monthly Strength (seasonal strength by branch)
export const MONTHLY_STRENGTH: Record<string, Record<string, number>> = {
  '寅': { '木': 1.2, '火': 1.1, '土': 0.9, '金': 0.7, '水': 0.8 },
  '卯': { '木': 1.2, '火': 1.1, '土': 0.9, '金': 0.7, '水': 0.8 },
  '辰': { '木': 1.1, '火': 1.0, '土': 1.1, '金': 0.8, '水': 0.9 },
  '巳': { '木': 0.9, '火': 1.2, '土': 1.0, '金': 0.8, '水': 0.7 },
  '午': { '木': 0.8, '火': 1.2, '土': 1.0, '金': 0.8, '水': 0.7 },
  '未': { '木': 0.9, '火': 1.0, '土': 1.2, '金': 0.9, '水': 0.8 },
  '申': { '木': 0.7, '火': 0.8, '土': 1.0, '金': 1.2, '水': 1.1 },
  '酉': { '木': 0.7, '火': 0.8, '土': 1.0, '金': 1.2, '水': 1.1 },
  '戌': { '木': 0.8, '火': 0.9, '土': 1.2, '金': 1.0, '水': 0.9 },
  '亥': { '木': 1.1, '火': 0.7, '土': 0.9, '金': 0.8, '水': 1.2 },
  '子': { '木': 1.1, '火': 0.7, '土': 0.9, '金': 0.8, '水': 1.2 },
  '丑': { '木': 0.9, '火': 0.8, '土': 1.1, '金': 1.0, '水': 1.0 }
};

// Five Elements Relations
export const FIVE_ELEMENTS_RELATIONS = {
  generating: {
    '木': '火',
    '火': '土',
    '土': '金',
    '金': '水',
    '水': '木'
  },
  controlling: {
    '木': '土',
    '土': '水',
    '水': '火',
    '火': '金',
    '金': '木'
  },
  // Reverse mappings (who generates/controls me)
  generateBy: {
    '木': '水',
    '火': '木',
    '土': '火',
    '金': '土',
    '水': '金'
  },
  restrictBy: {
    '木': '金',
    '火': '水',
    '土': '木',
    '金': '火',
    '水': '土'
  }
};